---
// Experience.astro
import Angeljpeg from "./ui/Angeljpeg.astro";
import { Icon } from "astro-icon/components";

const experiences = [
  {
    position: "Desarrollador Frontend",
    company: "Universidad Tecnologica de Nogales",
    period: "2023 - 2023",
    description: "Desarrollo de sitio web official.",
    technologies: ["React", "Tailwind", "TypeScript"],
    highlights: [
      "Mejoras en el rendimiento del sitio web.",
    ]
  },
];
---

<section
  id="experience"
  class="px-4 py-16 sm:px-8 md:px-16 lg:px-24 text-white font-roboto-mono relative"
>
  <!-- Background subtle grid pattern similar to about section -->
  <div class="absolute inset-0 bg-grid-pattern opacity-5 z-0"></div>

  <header
    class="w-full border-b-4 border-purple-400 text-2xl sm:text-3xl md:text-4xl pb-4 mb-12 relative z-10"
  >
    <Angeljpeg method="experience" />
  </header>

  <main class="relative z-10 max-w-6xl mx-auto">
    <div class="timeline">
      {experiences.map((exp, index) => (
        <div class={`timeline-item ${index % 2 === 0 ? 'right' : 'left'}`}>
          <div class="timeline-content">
            <!-- Purple dot at top of timeline node -->
            <div class="timeline-dot"></div>
            
            <!-- Company and period badge -->
            <div class="flex justify-between items-center mb-3 gap-3">
              <div
                class="inline-block px-2 py-1 lg:px-3 bg-purple-900/30 border border-purple-700/30 rounded-md text-purple-300 text-sm"
              >
                <span class="font-mono text-pretty">{exp.company}</span>
              </div>
              <span class="text-zinc-400 text-sm">{exp.period}</span>
            </div>

            <!-- Position title -->
            <h3 class="text-xl font-bold mb-2 text-white">
              {exp.position}
            </h3>

            <!-- Description -->
            <p class="text-zinc-300 mb-4 text-sm sm:text-base">
              {exp.description}
            </p>

            <!-- Highlights -->
            <div class="mb-4">
              <p class="text-xs uppercase tracking-wider text-zinc-500 mb-2">Logros destacados</p>
              <ul class="space-y-2">
                {exp.highlights.map(highlight => (
                  <li class="flex items-start text-sm">
                    <span class="text-purple-400 mr-2">
                      <Icon name="mdi:chevron-right" class="w-4 h-4" />
                    </span>
                    <span>{highlight}</span>
                  </li>
                ))}
              </ul>
            </div>

            <!-- Tech stack -->
            <div>
              <p class="text-xs uppercase tracking-wider text-zinc-500 mb-2">Tecnologías</p>
              <div class="flex flex-wrap gap-2">
                {exp.technologies.map(tech => (
                  <span
                    class="px-2 py-1 bg-zinc-800/50 rounded-md text-xs border border-zinc-700/50 hover:border-purple-500/50 transition-colors"
                  >
                    {tech}
                  </span>
                ))}
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </main>
</section>

<style>
  /* Subtle grid pattern similar to About section */
  .bg-grid-pattern {
    background-image: linear-gradient(
        to right,
        rgb(152, 48, 221) 1px,
        transparent 1px
      ),
      linear-gradient(to bottom, rgb(55, 38, 82) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  /* Timeline styling */
  .timeline {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
  }

  .timeline::after {
    content: '';
    position: absolute;
    width: 2px;
    background-color: rgba(139, 92, 246, 0.3);
    top: 0;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
  }

  /* Container around content */
  .timeline-item {
    position: relative;
    width: 100%;
    padding: 0 40px;
    margin-bottom: 60px;
  }

  /* The circles on the timeline */
  .timeline-dot {
    position: absolute;
    top: 0;
    width: 12px;
    height: 12px;
    background-color: #8b5cf6;
    border: 3px solid rgb(23, 23, 23);
    border-radius: 50%;
    z-index: 10;
  }

  /* Place the container to the left */
  .left {
    left: 0;
  }

  /* Place the container to the right */
  .right {
    left: 0;
  }

  /* Add arrows to the left container (pointing right) */
  .left .timeline-dot {
    right: -6px;
  }

  /* Add arrows to the right container (pointing left) */
  .right .timeline-dot {
    left: -6px;
  }

  /* The actual content */
  .timeline-content {
    position: relative;
    padding: 20px;
    background-color: rgba(39, 39, 42, 0.5);
    border: 1px solid rgba(82, 82, 91, 0.3);
    backdrop-filter: blur(3px);
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: transform 0.3s ease, border-color 0.3s ease;
  }

  .timeline-content:hover {
    transform: translateY(-5px);
    border-color: rgba(139, 92, 246, 0.5);
  }

  /* Media queries for responsive design */
  @media screen and (min-width: 768px) {
    .timeline-item {
      width: 50%;
    }

    .left {
      left: 0;
    }

    .right {
      left: 50%;
    }

    .left .timeline-content {
      margin-right: 40px;
    }

    .right .timeline-content {
      margin-left: 40px;
    }

    .left .timeline-dot {
      right: -6px;
    }

    .right .timeline-dot {
      left: -6px;
    }
  }

  /* Mobile view */
  @media screen and (max-width: 767px) {
    .timeline::after {
      left: 30px;
    }

    .timeline-item {
      width: 100%;
      padding-left: 60px; /* un poco menos para mejor alineación */
      padding-right: 25px;
      position: relative;
    }

    .timeline-content {
      margin-right: 0;
      margin-left: 0;
    }

    .timeline-dot {
    left: 18px; /* mejor alineación respecto al background line */
    top: 20px;
  }

    .left .timeline-content,
    .right .timeline-content {
      margin-left: 0;
    }
  }

</style>